SELECT NULL TEMP_TABLESPACE, NULL TEMP_SIZE_GB, NULL INDEX_NAME, 
  NULL INDEX_SIZE_GB FROM DUAL WHERE 1 = 0
UNION ALL (
SELECT NULL TEMP_TABLESPACE, NULL TEMP_SIZE_GB, NULL INDEX_NAME, 
  NULL INDEX_SIZE_GB FROM DUAL WHERE 1 = 0
) UNION ALL ( SELECT * FROM (
SELECT
  TEMP_DMTS_TABLESPACE || TEMP_LMTS_TABLESPACE TEMP_TABLESPACE,
  TO_CHAR(GREATEST(TEMP_DMTS_BYTES, TEMP_LMTS_BYTES) / 
    1024 / 1024 / 1024, 99999990.99) TEMP_SIZE_GB,
  INDEX_NAME,
  TO_CHAR(INDEX_BYTES / 1024 / 1024 / 1024, 999999990.99) INDEX_SIZE_GB
FROM
  ( SELECT DISTINCT
      FIRST_VALUE(BYTES) OVER (ORDER BY BYTES DESC) INDEX_BYTES,
      FIRST_VALUE(SEGMENT_NAME) OVER (ORDER BY BYTES DESC) INDEX_NAME
    FROM 
      DBA_SEGMENTS 
    WHERE 
      SEGMENT_TYPE LIKE 'INDEX%' ),
  ( SELECT 
      MIN(U.TEMPORARY_TABLESPACE) TEMP_DMTS_TABLESPACE,
      NVL(SUM(GREATEST(DF.BYTES, DF.MAXBYTES)), 0) TEMP_DMTS_BYTES
    FROM
      DBA_USERS U,
      DBA_DATA_FILES DF
    WHERE
      U.USERNAME = USER AND
      U.TEMPORARY_TABLESPACE = DF.TABLESPACE_NAME
  ),
  ( SELECT 
      MIN(U.TEMPORARY_TABLESPACE) TEMP_LMTS_TABLESPACE,
      NVL(SUM(GREATEST(DF.BYTES, DF.MAXBYTES)), 0) TEMP_LMTS_BYTES
    FROM
      DBA_USERS U,
      DBA_TEMP_FILES DF
    WHERE
      U.USERNAME = USER AND
      U.TEMPORARY_TABLESPACE = DF.TABLESPACE_NAME
  )
));
